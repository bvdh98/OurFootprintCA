<!-- Instructions for user to download their Fortis BC Usage History -->
<div class="fortis-bill-instructions">
  <p>Where do I get my Fortis BC Usage History?</p>
  <ol>
      <li>Login into your acoount</li>
      <li>Scroll down and click "view consumption history"</li>
      <li>Select spreadsheet.csv</li>
      <li>Download file</li>
  </ol>
</div>

<mat-file-upload
    [labelText]="'Please upload your Fortis BC Usage History (.csv)'"
    [acceptedTypes]="'.csv'"
    [uploadButtonText]="'Upload'"
    [selectButtonText]="'Select File'"
    [allowMultipleFiles]="false"
    (uploadClicked)="onUploadClicked($event)">
</mat-file-upload>

<div class="table-outter-container">
  <div class="table-inner-container">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 table" *ngIf="dataSource.data.length > 0">
      <!--- Note that these columns are not rendered until they are set as a property on the row definition. -->
      
        <!-- Start Date Column -->
        <ng-container matColumnDef="startDate">
          <th mat-header-cell *matHeaderCellDef> Start Date </th>
          <td mat-cell *matCellDef="let element"> {{element.start_date}} </td>
        </ng-container>
      
        <!-- End Date Column -->
        <ng-container matColumnDef="endDate">
          <th mat-header-cell *matHeaderCellDef> End Date </th>
          <td mat-cell *matCellDef="let element"> {{element.end_date}} </td>
        </ng-container>
      
        <!-- Number of Days Column -->
        <ng-container matColumnDef="numDays">
          <th mat-header-cell *matHeaderCellDef> Number of Days </th>
          <td mat-cell *matCellDef="let element"> {{element.num_days}} </td>
        </ng-container>

        <!-- Consumption Column -->
        <ng-container matColumnDef="consumption">
          <th mat-header-cell *matHeaderCellDef> Consumption </th>
          <td mat-cell *matCellDef="let element"> {{element.consumption}} kJ </td>
        </ng-container>

        <!-- Average Temperature Month Column -->
        <ng-container matColumnDef="avgTemp">
          <th mat-header-cell *matHeaderCellDef> Average Temperature </th>
          <td mat-cell *matCellDef="let element"> {{element.avg_temp}} </td>
        </ng-container>
    
        <!-- Delete Column -->
        <ng-container matColumnDef="delete">
          <th mat-header-cell *matHeaderCellDef> Delete </th>
          <td mat-cell *matCellDef="let element; let i=index">
            <button mat-icon-button aria-label="Delete fortis row button" (click)="deleteRow(i, table, dataSource, element.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
    
        <!-- The actual rendered content -->
      
        <!-- Header row for column names -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    
        <!-- Data rows -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
